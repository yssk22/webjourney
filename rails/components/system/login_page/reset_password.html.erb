<div class="content">
  <%= align_form(page.dom_id("form"), :label_width => 100) %>
  <% form_remote_tag(:url => formatted_password_reset_system_accounts_path("json"),
                     :datatype => "json",
                     :loading   => now_loading(page.dom_id("form")),
                     :success   => "LoginPage.onResetPasswordSuccess(request)",
                     :failure   => clear_overlay(page.dom_id("form")) + "LoginPage.onResetPasswordFailure(request)",
                     :html      => {
                       :method => "post",
                       :id       => page.dom_id("form"),
                       :onsubmit => validate_form(page.dom_id("form"))
                     }) do -%>
  <fieldset>
    <legend>Account Information</legend>
    <div style="display:none" class="error"></div>
    <div class="field">
      <label class="name" for="account_login_name">
        Login Name
      </label>
      <%= text_field 'account', 'login_name', :class => "required login_name" %>
    </div>
    <div class="field">
      <label class="name" for="account_email">
        Email
      </label>
      <%= text_field 'account', 'email', :class => "required email" %>
    </div>
    <div class="action">
      <%= submit_tag "Submit", :id => page.dom_id("account_submit") %>
    </div>
  </fieldset>
  <div class="spacer"></div>
  <% end -%>
  <div id="<%= page.dom_id('success') %>" style="display:none">
    <h2>Reset Password Process has been started.</h2>
    <p>
      The confirmation mail has been delivered to your email address.
      You can complete resetting password by clicking the link in the confirmation mail.
    </p>
  </div>
</div>
<script type="text/javascript">
  $(document).ready(function(){
  jQuery.validator.addMethod("login_name", function(value){
    return /^[a-z][a-z0-9_]{1,15}$/i.test(value);
  }, "Please enter a valid login name: This field must start with [a-z] and 2-15 of [a-z], digits or '_').");
  });
</script>
